<Project Sdk="Microsoft.NET.Sdk">
   <PropertyGroup>
      <TargetFramework>net8.0-windows10.0.22621.0</TargetFramework>
      <Platform>AnyCPU</Platform>
      <UseUwp>true</UseUwp>
      <IsAotCompatible>true</IsAotCompatible>
      <DisableRuntimeMarshalling>true</DisableRuntimeMarshalling>
      <EmbedUntrackedSources>true</EmbedUntrackedSources>
      <WindowsSdkPackageVersion>10.0.22621.54</WindowsSdkPackageVersion>
      <UseRidGraph>true</UseRidGraph>
      <UseUwpTools>false</UseUwpTools>
   </PropertyGroup>

   <Import Project="$(MSBuildProjectDirectory)\..\..\version.props" />

   <PropertyGroup>

     <!--
         Set the version (this includes both version number and prefix). It's all documented
         here: https://learn.microsoft.com/dotnet/core/project-sdk/msbuild-props#generateassemblyinfo.
         In particular, the default targets in the SDK do the following:
         - Set "AssemblyVersion" to the value $(Version) without the suffix (eg. "1.1.0").
         - Set "AssemblyFile" to match the assembly version.
         - Set "AssemblyInformationVersion" to $(Version) plus git hash (eg. "1.1.0+1b95cfe91e").
      -->
      <Version>$(MUXVersionMajor).$(MUXVersionMinor).$(MUXVersionPatch)</Version>

      <!--
        For non stable builds, also add the '-prereleaase<BUILD><REVISION>' suffix to the assembly version.
        The build is year and month, the revision is 'day-of-month' and 'build-number'. For instance,
        for '2.8.7-prerelease.241115009', that's version 2.8.7 from 2024, November 15th, 9th build of the day.
        If there's no build and revision number available, we just set '-prerelease' as suffix. This should
        only be the case when doing NuGet restore in the CI or for some local builds, so it doesn't matter.
      -->
      <Version Condition="'$(MUXFinalRelease)' != 'true' AND '$(MUXVersionBuild)' == '0' AND '$(MUXVersionRevision)' == '0'">$(Version)-prerelease</Version>
      <Version Condition="'$(MUXFinalRelease)' != 'true' AND '$(MUXVersionBuild)' != '0' AND '$(MUXVersionRevision)' != '0'">$(Version)-prerelease.$(MUXVersionBuild)$(MUXVersionRevision)</Version>
   </PropertyGroup>

   <PropertyGroup>
      <CsWinRTIncludes>Microsoft.UI.Xaml</CsWinRTIncludes>
   </PropertyGroup>

   <ItemGroup>
      <PackageReference Include="Microsoft.Windows.CSWinRT" Version="2.1.6" />
      <PackageReference Include="Microsoft.Web.WebView2" Version="1.0.2849.39" IncludeAssets="none" />
   </ItemGroup>

   <ItemGroup>
      <ProjectReference Include="..\dll\Microsoft.UI.Xaml.vcxproj" />
      <CsWinRTInputs Include="$(PkgMicrosoft_Web_WebView2)\lib\Microsoft.Web.WebView2.Core.winmd" />
      <Reference
         Include="$(PkgMicrosoft_Web_WebView2)\lib_manual\net6.0-windows10.0.17763.0\Microsoft.Web.WebView2.Core.Projection.dll" />
   </ItemGroup>
</Project>